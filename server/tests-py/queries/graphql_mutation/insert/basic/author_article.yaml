#Inserting author data
- description: Inserts author data via GraphQL mutation
  url: /v1alpha1/graphql
  response:
    data:
      insert_author:
        returning:
        - id: 1
          name: Author 1
        - id: 2
          name: Author 2
      insert_article:
        returning:
        - content: Sample article content
          id: 1
          title: Article 1
          author:
            id: 1
            name: Author 1
        - content: Sample article content
          id: 2
          title: Article 2
          author:
            id: 1
            name: Author 1
        - content: Sample article content
          id: 3
          title: Article 3
          author:
            id: 2
            name: Author 2
  status: 200
  query:
    query: |
      mutation insert_author_article {
        insert_author(
          objects: [
            {
              name: "Author 1"
            },
            {
              name: "Author 2"
            }
          ]
        ) {
          returning {
            id
            name
          }
        }

        insert_article (
          objects: [
          {
            title: "Article 1",
            content: "Sample article content",
            author_id: 1
          },
          {
            title: "Article 2",
            content: "Sample article content",
            author_id: 1
          },
          {
            title: "Article 3",
            content: "Sample article content",
            author_id: 2
          }
          ]
        ) {
          returning {
            id
            title
            content
            author {
              id
              name
            }
          }
        }
      }
- description: Delete the inserted articles
  url: /v1/query
  status: 200
  query:
    type: run_sql
    args:
      sql: |
        delete from article;
        delete from author;
        SELECT setval('article_id_seq', 1, FALSE);
        SELECT setval('author_id_seq', 1, FALSE);
